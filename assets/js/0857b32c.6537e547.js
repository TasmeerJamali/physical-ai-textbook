"use strict";(globalThis.webpackChunkdocs_site=globalThis.webpackChunkdocs_site||[]).push([[531],{6819:(e,n,t)=>{t.d(n,{A:()=>i});var s=t(6540);const r={container:"container_Bg0B",levelSelector:"levelSelector__bWR",levelLabel:"levelLabel_Dtdn",levelButtons:"levelButtons__ic_",levelButton:"levelButton__CKK",levelButtonActive:"levelButtonActive_MqUN",buttonGroup:"buttonGroup_JAA4",loadingMessage:"loadingMessage_hq4B",pulse:"pulse_Ml0H",button:"button_uKyo",active:"active_rj2W",activeUrdu:"activeUrdu_sPXe",activePersonalized:"activePersonalized_egrT"};var l=t(4848);function i({chapterId:e,apiUrl:n="http://localhost:8000"}){const[t,i]=(0,s.useState)(!1),[o,a]=(0,s.useState)(!1),[d,c]=(0,s.useState)(!1),[u,h]=(0,s.useState)(null),[p,m]=(0,s.useState)(null),[x,b]=(0,s.useState)(null),[g,j]=(0,s.useState)("intermediate"),[y,f]=(0,s.useState)(!1);(0,s.useEffect)(()=>{const e=localStorage.getItem("userLevel");e&&j(e)},[]);const _=()=>{const e=document.querySelector("article");return e?.innerHTML||""};return(0,l.jsxs)("div",{className:r.container,children:[(t||o)&&(0,l.jsxs)("div",{className:r.loadingMessage,children:["\u23f3 ",t?"Personalizing":"Translating","... This may take 20-30 seconds"]}),(0,l.jsxs)("div",{className:r.levelSelector,children:[(0,l.jsx)("span",{className:r.levelLabel,children:"Your Level:"}),(0,l.jsx)("div",{className:r.levelButtons,children:["beginner","intermediate","advanced"].map(e=>(0,l.jsxs)("button",{className:`${r.levelButton} ${g===e?r.levelButtonActive:""}`,onClick:()=>(e=>{j(e),localStorage.setItem("userLevel",e)})(e),disabled:t||o,children:["beginner"===e?"\ud83c\udf31":"intermediate"===e?"\ud83c\udf3f":"\ud83c\udf33"," ",e.charAt(0).toUpperCase()+e.slice(1)]},e))})]}),(0,l.jsxs)("div",{className:r.buttonGroup,children:[(0,l.jsxs)("button",{className:`${r.button} ${y?r.activePersonalized:""}`,onClick:async()=>{if(y){const e=document.querySelector("article");return e&&x&&(e.innerHTML=x),f(!1),void h(null)}i(!0);try{const t=_();x||b(t);const s=await fetch(`${n}/api/personalize/adapt`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:t,chapter_id:e,user_level:g,user_background:JSON.parse(localStorage.getItem("userBackground")||"{}")})}),r=await s.json();h(r.personalized_content),f(!0);const l=document.querySelector("article");l&&(l.innerHTML=r.personalized_content)}catch(t){console.error("Personalization failed:",t)}finally{i(!1)}},disabled:t||o,title:y?"Restore original content":"Personalize content based on your experience level",children:[t?"\u23f3":y?"\ud83d\udd19":"\u2728"," ",y?"Back to Original":"Personalize"]}),(0,l.jsxs)("button",{className:`${r.button} ${d?r.activeUrdu:""}`,onClick:async()=>{if(d){const e=document.querySelector("article");return e&&(u?e.innerHTML=u:x?e.innerHTML=x:window.location.reload(),e.dir="ltr"),void c(!1)}a(!0);try{const e=_();x||b(e);const t=await fetch(`${n}/api/personalize/translate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:e,target_language:"ur",preserve_code:!0})}),s=await t.json();m(s.translated_content);const r=document.querySelector("article");r&&(r.innerHTML=s.translated_content,r.dir="rtl"),c(!0)}catch(e){console.error("Translation failed:",e)}finally{a(!1)}},disabled:o||t,title:d?"Switch back to English":"Translate to Urdu",children:[o?"\u23f3":d?"\ud83d\udd19":"\ud83c\udf10"," ",d?"Back to English":"\u0627\u0631\u062f\u0648"]})]})]})}},8374:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"module-1-ros2/first-node","title":"Chapter 1.2: Your First ROS 2 Node","description":"Now that you understand the fundamentals, let\'s write your first ROS 2 node! We\'ll create a simple publisher that sends messages.","source":"@site/docs/module-1-ros2/first-node.md","sourceDirName":"module-1-ros2","slug":"/module-1-ros2/first-node","permalink":"/physical-ai-textbook/docs/module-1-ros2/first-node","draft":false,"unlisted":false,"editUrl":"https://github.com/TasmeerJamali/physical-ai-textbook/tree/main/docs/module-1-ros2/first-node.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"textbookSidebar","previous":{"title":"Chapter 1.1: ROS 2 Fundamentals","permalink":"/physical-ai-textbook/docs/module-1-ros2/fundamentals"},"next":{"title":"Module 2: Gazebo & Unity","permalink":"/physical-ai-textbook/docs/category/module-2-gazebo--unity"}}');var r=t(4848),l=t(8453),i=t(6819);const o={sidebar_position:3},a="Chapter 1.2: Your First ROS 2 Node",d={},c=[{value:"\ud83c\udfaf What We&#39;ll Build",id:"-what-well-build",level:2},{value:"\ud83d\udcc1 Project Setup",id:"-project-setup",level:2},{value:"\ud83d\udcbb The Code",id:"-the-code",level:2},{value:"\ud83d\udd27 Understanding the Code",id:"-understanding-the-code",level:2},{value:"\ud83d\ude80 Running Your Node",id:"-running-your-node",level:2},{value:"\ud83d\udcdd Exercise",id:"-exercise",level:2},{value:"\u2705 Key Takeaways",id:"-key-takeaways",level:2},{value:"\u27a1\ufe0f Next Chapter",id:"\ufe0f-next-chapter",level:2}];function u(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"chapter-12-your-first-ros-2-node",children:"Chapter 1.2: Your First ROS 2 Node"})}),"\n",(0,r.jsx)(i.A,{chapterId:"module-1-ros2-first-node"}),"\n",(0,r.jsx)(n.p,{children:"Now that you understand the fundamentals, let's write your first ROS 2 node! We'll create a simple publisher that sends messages."}),"\n",(0,r.jsx)(n.h2,{id:"-what-well-build",children:"\ud83c\udfaf What We'll Build"}),"\n",(0,r.jsx)(n.p,{children:"A Python node that:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:'Publishes "Hello, Robot!" messages'}),"\n",(0,r.jsx)(n.li,{children:"Runs at 1 Hz (once per second)"}),"\n",(0,r.jsxs)(n.li,{children:["Uses the standard ",(0,r.jsx)(n.code,{children:"String"})," message type"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"-project-setup",children:"\ud83d\udcc1 Project Setup"}),"\n",(0,r.jsx)(n.p,{children:"First, create a ROS 2 workspace:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Create workspace\nmkdir -p ~/ros2_ws/src\ncd ~/ros2_ws/src\n\n# Create package\nros2 pkg create --build-type ament_python my_first_robot\n"})}),"\n",(0,r.jsx)(n.h2,{id:"-the-code",children:"\ud83d\udcbb The Code"}),"\n",(0,r.jsxs)(n.p,{children:["Create ",(0,r.jsx)(n.code,{children:"my_first_robot/my_first_robot/hello_publisher.py"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\nclass HelloPublisher(Node):\n    """A simple node that publishes greeting messages."""\n    \n    def __init__(self):\n        super().__init__(\'hello_publisher\')\n        \n        # Create publisher\n        self.publisher = self.create_publisher(\n            String,           # Message type\n            \'greetings\',      # Topic name\n            10                # Queue size\n        )\n        \n        # Create timer (1 Hz)\n        self.timer = self.create_timer(1.0, self.timer_callback)\n        self.count = 0\n        \n        self.get_logger().info(\'Hello Publisher started!\')\n    \n    def timer_callback(self):\n        """Called every second to publish a message."""\n        msg = String()\n        msg.data = f\'Hello, Robot! Count: {self.count}\'\n        \n        self.publisher.publish(msg)\n        self.get_logger().info(f\'Published: "{msg.data}"\')\n        \n        self.count += 1\n\ndef main(args=None):\n    rclpy.init(args=args)\n    node = HelloPublisher()\n    \n    try:\n        rclpy.spin(node)\n    except KeyboardInterrupt:\n        pass\n    finally:\n        node.destroy_node()\n        rclpy.shutdown()\n\nif __name__ == \'__main__\':\n    main()\n'})}),"\n",(0,r.jsx)(n.h2,{id:"-understanding-the-code",children:"\ud83d\udd27 Understanding the Code"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Component"}),(0,r.jsx)(n.th,{children:"Purpose"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Node"})}),(0,r.jsx)(n.td,{children:"Base class for all ROS 2 nodes"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"create_publisher()"})}),(0,r.jsx)(n.td,{children:"Creates a publisher for a topic"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"create_timer()"})}),(0,r.jsx)(n.td,{children:"Schedules periodic callbacks"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"rclpy.spin()"})}),(0,r.jsx)(n.td,{children:"Keeps the node running"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"-running-your-node",children:"\ud83d\ude80 Running Your Node"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Build the workspace\ncd ~/ros2_ws\ncolcon build\n\n# Source the workspace\nsource install/setup.bash\n\n# Run the node\nros2 run my_first_robot hello_publisher\n"})}),"\n",(0,r.jsx)(n.h2,{id:"-exercise",children:"\ud83d\udcdd Exercise"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Modify the message to include your name"}),"\n",(0,r.jsx)(n.li,{children:"Change the publishing rate to 2 Hz"}),"\n",(0,r.jsxs)(n.li,{children:["Add a subscriber in another terminal: ",(0,r.jsx)(n.code,{children:"ros2 topic echo /greetings"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"-key-takeaways",children:"\u2705 Key Takeaways"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Nodes inherit from ",(0,r.jsx)(n.code,{children:"rclpy.node.Node"})]}),"\n",(0,r.jsx)(n.li,{children:"Publishers send messages to topics"}),"\n",(0,r.jsx)(n.li,{children:"Timers enable periodic execution"}),"\n",(0,r.jsxs)(n.li,{children:["Always call ",(0,r.jsx)(n.code,{children:"rclpy.shutdown()"})," when done"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\ufe0f-next-chapter",children:"\u27a1\ufe0f Next Chapter"}),"\n",(0,r.jsxs)(n.p,{children:["Continue to ",(0,r.jsx)(n.a,{href:"./pub-sub",children:"Chapter 1.3: Publishers and Subscribers"})," to build a complete communication system!"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>o});var s=t(6540);const r={},l=s.createContext(r);function i(e){const n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);